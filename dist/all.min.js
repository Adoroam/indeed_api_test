function indeed_clk(a,sig){var hr=a.href;console.log("hr "+hr);var si=hr.indexOf("&jsa=");if(console.log("si "+si),!(si>0)){var jsh=hr+"&jsa="+sig;-1==jsh.indexOf("&inchal")&&(jsh+="&inchal=apiresults"),a.href=jsh}}function init(){(new Image).src=document.location.protocol+"//gdc.indeed.com/rpc/apilog?a=apiresults"}window.addEventListener?window.addEventListener("load",init,!1):window.attachEvent&&window.attachEvent("onload",init);var app=angular.module("app",["ngCookies"]);app.config(["$locationProvider",function($locationProvider){$locationProvider.html5Mode(!0)}]),app.controller("indexCtrl",["$scope","$cookies","$location","ind",function($scope,$cookies,$location,ind){$scope.queryinfo=$location.search(),$scope.xml=!1,$scope.update=function(reset){"page"==reset&&($scope.queryinfo.start="0",$scope.queryinfo.limit="20"),"all"==reset&&($scope.queryinfo.start="0",$scope.queryinfo.limit="20",$scope.queryinfo.date="any",$scope.queryinfo.jobtype="any",$scope.queryinfo.radius="25"),$location.search($scope.queryinfo),ind.get().then(function(d){d.data?($scope.xmltotal=d.data.totalresults[0],$scope.xml=d.data.results[0],"string"==typeof $scope.xml&&($scope.xml=!1)):console.log("nodata")})},$scope.resetPage=function(){$scope.queryinfo.start="0",$scope.queryinfo.limit="20"},$scope.adv={tog:!1,color:"white"},$scope.advtoggle=function(){$scope.adv.tog?($scope.adv.tog=!1,$scope.adv.color="white"):($scope.adv.tog=!0,$scope.adv.color="purple")},$scope.enter=function(event){13==event.keyCode&&$scope.update("page")},$scope.controls=function(direction){var qs=$scope.queryinfo.start,ql=$scope.queryinfo.limit,ta=$scope.xmltotal;if(ta=Number(ta),qs=Number(qs),ql=Number(ql),"hide"==direction)return qs>1?!1:!0;if("show"==direction)return ta>qs+ql?!0:!1;if("end"==direction){var total=qs+ql;return total>=$scope.xmltotal?$scope.xmltotal:total}"next"==direction&&(qs+=ql),"prev"==direction&&(qs-=ql),1>qs&&(qs=0),$scope.queryinfo.start=qs.toString(),$scope.update()},$scope.update("all")}]),app.factory("ind",function($http,$location){function buildquery(){var str="",parsed=$location.search(),count=0;for(x in parsed)count?str+="&"+x+"="+parsed[x]:(str+="?"+x+"="+parsed[x],count++);return str}var jsondata={get:function(){if(!promise){var promise=$http.get("/data"+buildquery()).success(function(response){return response});return promise}}};return jsondata}),app.directive("pageControls",function(){return{restrict:"E",transclude:!0,templateUrl:"templates/pc.html"}}),app.directive("advSearch",function(){return{restrict:"E",transclude:!0,templateUrl:"templates/advsearch.html"}});